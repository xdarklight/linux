# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/mtd/mediatek,nfiecc.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Mediatek NAND Flash Interface ECC engine

maintainers:
  - Weijie Gao <weijie.gao@mediatek.com>
  - Jorge Ramirez-Ortiz <jorge.ramirez-ortiz@linaro.org>

properties:
  compatible:
    enum:
      - mediatek,mt2701-ecc
      - mediatek,mt2712-ecc
      - mediatek,mt7621-ecc
      - mediatek,mt7622-ecc

  reg:
    maxItems: 1

  clocks:
    maxItems: 1

  clock-names:
    items:
      - const: nfiecc_clk

  interrupts:
    maxItems: 1

allOf:
  - if:
      properties:
        compatible:
          contains:
            enum:
              - mediatek,mt2701-ecc
              - mediatek,mt2712-ecc
              - mediatek,mt7622-ecc
    then:
      required:
        - interrupts

required:
  - compatible
  - reg
  - clocks
  - clock-names

additionalProperties: false

examples:
  - |
    ecc@1100e000 {
      compatible = "mediatek,mt2701-ecc";
      reg = <0x1100e000 0x1000>;
      interrupts = <55>;
      clocks = <&nfi_ecc_clk>;
      clock-names = "nfiecc_clk";
    };
  - |
    ecc@1e003800 {
      compatible = "mediatek,mt7621-ecc";
      reg = <0x1e003800 0x800>;
      clocks = <&nfi_clk>;
      clock-names = "nfiecc_clk";
    };

...
