# SPDX-License-Identifier: (GPL-2.0 OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/mtd/intel,lgm-ebunand.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Intel LGM SoC NAND Controller Device Tree Bindings

maintainers:
  - Ramuthevar Vadivel Murugan <vadivel.muruganx.ramuthevar@linux.intel.com>

properties:
  compatible:
    enum:
      - intel,lgm-ebunand
      - lantiq,danube-ebunand
      - lantiq,xrx100-ebunand
      - lantiq,xrx200-ebunand
      - lantiq,xrx300-ebunand

  reg:
    minItems: 5
    maxItems: 6

  reg-names:
    items:
      - const: ebunand
      - const: hsnand
      - const: nand_cs0
      - const: nand_cs1
      - const: addr_sel0
      - const: addr_sel1

  clocks:
    maxItems: 1

  dmas:
    maxItems: 2

  dma-names:
    items:
      - const: tx
      - const: rx

  "#address-cells":
    const: 1

  "#size-cells":
    const: 0

allOf:
  - $ref: "nand-controller.yaml"

  - if:
      properties:
        compatible:
          contains:
            const: intel,lgm-ebunand
    then:
      required:
        - dmas
        - dma-names

patternProperties:
  "^nand@[a-f0-9]+$":
    type: object
    properties:
      reg:
        minimum: 0
        maximum: 1

required:
  - compatible
  - reg
  - reg-names
  - clocks
  - "#address-cells"
  - "#size-cells"

additionalProperties: false

examples:
  - |
    nand-controller@e0f00000 {
      compatible = "intel,lgm-ebunand";
      reg = <0xe0f00000 0x100>,
            <0xe1000000 0x300>,
            <0xe1400000 0x8000>,
            <0xe1c00000 0x1000>,
            <0x17400000 0x4>,
            <0x17c00000 0x4>;
      reg-names = "ebunand", "hsnand", "nand_cs0", "nand_cs1",
        "addr_sel0", "addr_sel1";
      clocks = <&cgu0 125>;
      dmas = <&dma0 8>, <&dma0 9>;
      dma-names = "tx", "rx";
      #address-cells = <1>;
      #size-cells = <0>;

      nand@0 {
        reg = <0>;
        nand-ecc-mode = "hw";
      };
    };
  - |
    nand-controller@e1053b0 {
      compatible = "lantiq,xrx300-ebunand";
      reg = <0xe1053b0 0x14>,
            <0x0 0x1000>,
            <0x4000000 0x1000>,
            <0x0 0x4>,
            <0x4000000 0x4>;
      reg-names = "ebunand", "nand_cs0", "nand_cs1", "addr_sel0", "addr_sel1";
      #address-cells = <1>;
      #size-cells = <0>;

      nand@0 {
        reg = <0>;
        nand-ecc-mode = "soft";
      };
    };

...
